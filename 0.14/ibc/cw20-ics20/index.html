<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.2">
<link rel="search" type="application/opensearchdescription+xml" title="CosmWasm Documentation" href="/opensearch.xml"><title data-react-helmet="true">CW20 ICS20 | CosmWasm Documentation</title><meta data-react-helmet="true" property="og:url" content="https://docs.cosmwasm.com/0.14/ibc/cw20-ics20"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="0.14"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-0.14"><meta data-react-helmet="true" property="og:title" content="CW20 ICS20 | CosmWasm Documentation"><meta data-react-helmet="true" name="description" content="Specification"><meta data-react-helmet="true" property="og:description" content="Specification"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.cosmwasm.com/0.14/ibc/cw20-ics20"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/0.14/ibc/cw20-ics20" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.cosmwasm.com/0.14/ibc/cw20-ics20" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.65ab5a88.css">
<link rel="preload" href="/assets/js/runtime~main.54999240.js" as="script">
<link rel="preload" href="/assets/js/main.c7a4d278.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#7691FE;color:#F5F6F7" role="banner"><div class="announcementBarContent_3EUC announcementBarCloseable_3myR">New documentation will be released with CosmWasm 1.0, follow and contribute changes at <a href="https://docs.cosmwasm.com/next">next</a></div><button type="button" class="announcementBarClose_38nx clean-btn" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/0.14/">0.14</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/next/ibc/cw20-ics20">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/0.14/ibc/cw20-ics20">0.14</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://docs.cosmwasm.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/img/logo.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_dark.svg" alt="CosmWasm" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="menu__link"><span>Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a href="https://github.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/next/ibc/cw20-ics20">Next</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/0.14/ibc/cw20-ics20">0.14</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 0.14</span><div class="markdown"><header><h1 class="h1Heading_27L5">CW20 ICS20</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="specification"></a>Specification<a class="hash-link" href="#specification" title="Direct link to heading">#</a></h2><p>This is an <em>IBC Enabled</em> contract that allows us to send CW20 tokens from one chain over the standard ICS20
protocol to the bank module of another chain. In short, it let&#x27;s us send our custom CW20 tokens with IBC and use
them just like native tokens on other chains.</p><p>It is only designed to send tokens and redeem previously sent tokens. It will not mint tokens belonging
to assets originating on the foreign chain. This is different than the Golang <code>ibctransfer</code> module, but
we properly implement ICS20 and respond with an error message... let&#x27;s hope the Go side handles this correctly.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="workflow"></a>Workflow<a class="hash-link" href="#workflow" title="Direct link to heading">#</a></h3><p>The contract starts with minimal state. It just stores a default timeout in seconds for all packets it sends.
Most importantly it binds a local IBC port to enable channel connections.</p><p>An external party first needs to make one or more channels using this contract as one endpoint. It will use standard ics20
unordered channels for the version negotiation. Once established, it manages a list of known channels. You can use
<a href="https://github.com/confio/ts-relayer" target="_blank" rel="noopener noreferrer">ts-relayer</a> <code>ibc-setup ics20</code> command to create these.</p><p>After there is at least one channel, you can send any CW20 token to this contract via the
<a href="https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw20/README.md#receiver" target="_blank" rel="noopener noreferrer">receiver pattern</a>.
The receive message must contain the channel to send over and the remote address to send to. It may optionally
include a custom timeout.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="messages"></a>Messages<a class="hash-link" href="#messages" title="Direct link to heading">#</a></h3><p>It only accepts CW20ReceiveMsg from a cw20 contract. The data sent along with that message must be a JSON-serialized
TransferMsg:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pub struct TransferMsg {</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The local channel to send the packets on</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub channel: String,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// The remote address to send to</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// Don&#x27;t use HumanAddress as this will likely have a different Bech32 prefix than we use</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// and cannot be validated locally</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub remote_address: String,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    /// How long the packet lives in seconds. If not specified, use default_timeout</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    pub timeout: Option&lt;u64&gt;,</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In addition, it supports directly sending native tokens via <code>ExecuteMsg::Transfer(TransferMsg)</code>.
You must send <em>exactly one</em> coin denom along with the transfer message, and that amount will be transfered
to the remote host.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="queries"></a>Queries<a class="hash-link" href="#queries" title="Direct link to heading">#</a></h3><p>Queries only make sense relative to the established channels of this contract.</p><ul><li><code>Port{}</code> - returns the port ID this contract has bound, so you can create channels. This info can be queried
via wasmd contract info query, but we expose another query here for convenience.</li><li><code>ListChannels{}</code> - returns a (currently unpaginated) list of all channels that have been created on this contract.
Returns their local channelId along with some basic metadata, like the remote port/channel and the connection they
run on top of.</li><li><code>Channel{id}</code> - returns more detailed information on one specific channel. In addition to the information available
in the list view, it returns the current outstanding balance on that channel, as well as the total amount that
has ever been sent on the channel.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ibc-responses"></a>IBC Responses<a class="hash-link" href="#ibc-responses" title="Direct link to heading">#</a></h3><p>These are defined by the ICS20 spec.</p><p>Notably, each Channel has a balance of tokens sent over that channel. If an incoming transfer request comes in for
a denom it does not know, or for a balance larger than we have sent, we will return an error in the acknowledgement
packet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="demonstration"></a>Demonstration<a class="hash-link" href="#demonstration" title="Direct link to heading">#</a></h2><p><strong>Under Development</strong></p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/CosmWasm/docs/edit/main/versioned_docs/version-0.14/ibc/cw20-ics20.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#specification" class="table-of-contents__link">Specification</a><ul><li><a href="#workflow" class="table-of-contents__link">Workflow</a></li><li><a href="#messages" class="table-of-contents__link">Messages</a></li><li><a href="#queries" class="table-of-contents__link">Queries</a></li><li><a href="#ibc-responses" class="table-of-contents__link">IBC Responses</a></li></ul></li><li><a href="#demonstration" class="table-of-contents__link">Demonstration</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Related Documentation</div><ul class="footer__items"><li class="footer__item"><a href="https://cosmos.network/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cosmos SDK</a></li><li class="footer__item"><a href="https://hub.cosmos.network/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cosmos Hub</a></li><li class="footer__item"><a href="https://docs.tendermint.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tendermint Core</a></li></ul></div><div class="col footer__col"><div class="footer__title">Repositories</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/cosmwasm</a></li><li class="footer__item"><a href="https://github.com/CosmWasm/wasmd" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/wasmd</a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cosmwasm-plus" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/cosmwasm-plus</a></li><li class="footer__item"><a href="https://github.com/CosmWasm/cawesome-wasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">CosmWasm/cawesome-wasm</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://medium.com/cosmwasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://docs.cosmwasm.com/chat/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/CosmWasm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://cosmwasm.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/logo_stacked.png" alt="CosmWasm Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2021 Confio OÃœ</div></div></div></footer></div>
<script src="/assets/js/runtime~main.54999240.js"></script>
<script src="/assets/js/main.c7a4d278.js"></script>
</body>
</html>