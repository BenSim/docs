<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Comparison with Solidity Contracts | CosmWasm Documentation</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/logo/SVG/CosmWasm Favicon.svg">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.8620f469.css" as="style"><link rel="preload" href="/assets/js/app.8a6340ad.js" as="script"><link rel="preload" href="/assets/js/23.9b72ba7c.js" as="script"><link rel="preload" href="/assets/js/20.791cc9e9.js" as="script"><link rel="preload" href="/assets/js/24.279da354.js" as="script"><link rel="preload" href="/assets/js/45.2cd0574a.js" as="script"><link rel="preload" href="/assets/js/29.8b812776.js" as="script"><link rel="preload" href="/assets/js/9.1517c868.js" as="script"><link rel="preload" href="/assets/js/6.6d6b1776.js" as="script"><link rel="preload" href="/assets/js/64.bf80057c.js" as="script"><link rel="preload" href="/assets/js/4.42d02817.js" as="script"><link rel="preload" href="/assets/js/27.9c450243.js" as="script"><link rel="preload" href="/assets/js/12.0fca4108.js" as="script"><link rel="preload" href="/assets/js/11.6adb2a6d.js" as="script"><link rel="preload" href="/assets/js/19.e0154ff6.js" as="script"><link rel="prefetch" href="/assets/js/1.557f7f93.js"><link rel="prefetch" href="/assets/js/10.b00562fc.js"><link rel="prefetch" href="/assets/js/13.d826b108.js"><link rel="prefetch" href="/assets/js/14.0e1d87f7.js"><link rel="prefetch" href="/assets/js/15.14e24622.js"><link rel="prefetch" href="/assets/js/16.1fc4ed70.js"><link rel="prefetch" href="/assets/js/17.4b7cd909.js"><link rel="prefetch" href="/assets/js/18.3ddb83ea.js"><link rel="prefetch" href="/assets/js/21.5a610e1f.js"><link rel="prefetch" href="/assets/js/22.14968634.js"><link rel="prefetch" href="/assets/js/25.b62b4ad2.js"><link rel="prefetch" href="/assets/js/26.81436c37.js"><link rel="prefetch" href="/assets/js/28.12802eae.js"><link rel="prefetch" href="/assets/js/3.09eef483.js"><link rel="prefetch" href="/assets/js/30.64af60ce.js"><link rel="prefetch" href="/assets/js/31.09d5549c.js"><link rel="prefetch" href="/assets/js/32.28fb0481.js"><link rel="prefetch" href="/assets/js/33.885407c5.js"><link rel="prefetch" href="/assets/js/34.c7ac072d.js"><link rel="prefetch" href="/assets/js/35.48b0858e.js"><link rel="prefetch" href="/assets/js/36.267ecabe.js"><link rel="prefetch" href="/assets/js/37.b6a931de.js"><link rel="prefetch" href="/assets/js/38.c9c3630f.js"><link rel="prefetch" href="/assets/js/39.2cb437cb.js"><link rel="prefetch" href="/assets/js/40.fe788091.js"><link rel="prefetch" href="/assets/js/41.789d1fee.js"><link rel="prefetch" href="/assets/js/42.09880d5e.js"><link rel="prefetch" href="/assets/js/43.198fc1d0.js"><link rel="prefetch" href="/assets/js/44.9d155ad2.js"><link rel="prefetch" href="/assets/js/46.0c16f573.js"><link rel="prefetch" href="/assets/js/47.9834d2ec.js"><link rel="prefetch" href="/assets/js/48.a884ad50.js"><link rel="prefetch" href="/assets/js/49.3a8bdb4c.js"><link rel="prefetch" href="/assets/js/5.d448c1d7.js"><link rel="prefetch" href="/assets/js/50.12e627da.js"><link rel="prefetch" href="/assets/js/51.1e4a304c.js"><link rel="prefetch" href="/assets/js/52.6a92e5d6.js"><link rel="prefetch" href="/assets/js/53.0a3d9965.js"><link rel="prefetch" href="/assets/js/54.dba6745a.js"><link rel="prefetch" href="/assets/js/55.00d0e2d0.js"><link rel="prefetch" href="/assets/js/56.8c34606e.js"><link rel="prefetch" href="/assets/js/57.446736c1.js"><link rel="prefetch" href="/assets/js/58.8b62f2a9.js"><link rel="prefetch" href="/assets/js/59.3bc31b0b.js"><link rel="prefetch" href="/assets/js/60.f92117f4.js"><link rel="prefetch" href="/assets/js/61.66325d0f.js"><link rel="prefetch" href="/assets/js/62.fd3cc0bb.js"><link rel="prefetch" href="/assets/js/63.813839c2.js"><link rel="prefetch" href="/assets/js/65.d0426983.js"><link rel="prefetch" href="/assets/js/66.5e71d046.js"><link rel="prefetch" href="/assets/js/67.a02919c8.js"><link rel="prefetch" href="/assets/js/68.89e3f897.js"><link rel="prefetch" href="/assets/js/69.b84e698e.js"><link rel="prefetch" href="/assets/js/7.82ca49d9.js"><link rel="prefetch" href="/assets/js/70.84243c6e.js"><link rel="prefetch" href="/assets/js/71.a1ab73c9.js"><link rel="prefetch" href="/assets/js/72.6cf04972.js"><link rel="prefetch" href="/assets/js/73.c12d28a0.js"><link rel="prefetch" href="/assets/js/74.8c7328ce.js"><link rel="prefetch" href="/assets/js/75.8a0bd28e.js"><link rel="prefetch" href="/assets/js/76.cb616105.js"><link rel="prefetch" href="/assets/js/77.74fdf6d4.js"><link rel="prefetch" href="/assets/js/78.f5c8a82f.js"><link rel="prefetch" href="/assets/js/79.66af7203.js"><link rel="prefetch" href="/assets/js/8.b36ebc5b.js"><link rel="prefetch" href="/assets/js/80.fbd897fe.js"><link rel="prefetch" href="/assets/js/81.f6f6f0bb.js"><link rel="prefetch" href="/assets/js/82.caebcce6.js"><link rel="prefetch" href="/assets/js/83.e989775f.js"><link rel="prefetch" href="/assets/js/84.4d99a0ee.js"><link rel="prefetch" href="/assets/js/85.876891c4.js"><link rel="prefetch" href="/assets/js/86.2f6a7db0.js"><link rel="prefetch" href="/assets/js/87.47940869.js"><link rel="prefetch" href="/assets/js/88.dd664f65.js"><link rel="prefetch" href="/assets/js/89.39dcc168.js"><link rel="prefetch" href="/assets/js/90.d10f7826.js"><link rel="prefetch" href="/assets/js/91.e4e7662a.js"><link rel="prefetch" href="/assets/js/92.cf4b6b4d.js"><link rel="prefetch" href="/assets/js/93.94750679.js"><link rel="prefetch" href="/assets/js/94.8038d4aa.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8620f469.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-v-5ce2392f><div data-v-40401285 data-v-5ce2392f><div class="banner-wrapper" data-v-40401285 data-v-40401285><div class="wrapper" data-v-40401285><div class="message" data-v-40401285>By using this website, you agree to our <a href="https://www.cookiesandyou.com" target="_blank" rel="noopener" style="color:#505FFF;" data-v-40401285>Cookie Policy</a>.</div> <div class="box" data-v-40401285><span class="icon-cross" data-v-40401285><svg width="16" height="16" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-40401285><path d="M1.66669 1.66669L12.3334 12.3334M12.3334 1.66669L1.66664 12.3334" stroke="#A2A3AD" stroke-width="1.5" stroke-linecap="round" data-v-40401285></path></svg></span></div></div></div></div><!----><div class="layout" data-v-5ce2392f><div class="layout__sidebar" data-v-5ce2392f><div style="height:100%;position:relative;" data-v-176b64c6 data-v-5ce2392f><div class="container" data-v-176b64c6><a href="/" class="logo__container router-link-active" data-v-176b64c6><div class="logo" data-v-176b64c6><div class="logo__img__custom" data-v-176b64c6><img src="/logo/SVG/CosmWasm Logo.svg" data-v-176b64c6></div><!----></div></a><div class="items footer__compact__false" data-v-176b64c6><div class="sidebar" style="display:none;" data-v-176b64c6><div class="title" data-v-176b64c6></div><!----></div><div class="sidebar" style="display:block;" data-v-176b64c6><div class="title" data-v-176b64c6></div><!----></div><div class="sidebar" style="display:block;" data-v-176b64c6><div class="title" data-v-176b64c6>Learn</div><!----></div><div class="sidebar" style="display:block;" data-v-176b64c6><div class="title" data-v-176b64c6>Plus Contracts</div><!----></div><div class="sidebar" style="display:block;" data-v-176b64c6><div class="title" data-v-176b64c6>Resources</div><!----></div></div><!----></div></div></div><div class="layout__main" data-v-5ce2392f><div class="layout__main__navbar" data-v-5ce2392f><div data-v-19189c02 data-v-5ce2392f><div class="container" data-v-19189c02><div class="menu" data-v-19189c02><div class="menu__icon" data-v-19189c02><svg width="100%" height="100%" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#888" data-v-19189c02><path d="M2 5H22M2 12H22M2 19H22" stroke-width="1.5" stroke-linecap="round"></path></svg></div></div><div class="logo" data-v-19189c02><div class="logo__wrapper router-link-active" data-v-19189c02><div class="logo__image__custom" data-v-19189c02><img src="/logo/SVG/CosmWasm Logo.svg" class="logo__image__custom__img" data-v-19189c02></div><!----></div></div><div class="toolbar" data-v-19189c02><div class="toolbar__item" data-v-19189c02><div class="toolbar__item__icon" data-v-19189c02><svg width="100%" height="100%" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#888" data-v-19189c02><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 2.75C6.66751 2.75 2.75 6.66751 2.75 11.5C2.75 16.3325 6.66751 20.25 11.5 20.25C13.6462 20.25 15.612 19.4773 17.1342 18.1949L22.6697 23.7303C22.9626 24.0232 23.4374 24.0232 23.7303 23.7303C24.0232 23.4374 24.0232 22.9626 23.7303 22.6697L18.1949 17.1342C19.4773 15.612 20.25 13.6462 20.25 11.5C20.25 6.66751 16.3325 2.75 11.5 2.75ZM16.6923 16.5599C17.9656 15.2535 18.75 13.4684 18.75 11.5C18.75 7.49594 15.5041 4.25 11.5 4.25C7.49594 4.25 4.25 7.49594 4.25 11.5C4.25 15.5041 7.49594 18.75 11.5 18.75C13.4684 18.75 15.2535 17.9656 16.5599 16.6923C16.5789 16.6679 16.5996 16.6444 16.622 16.622C16.6444 16.5996 16.6679 16.5789 16.6923 16.5599Z"></path></svg></div></div></div></div></div></div><div class="layout__main__content aside__true" data-v-5ce2392f><div id="content-scroll" class="layout__main__content__body" data-v-5ce2392f><div class="layout__main__content__body__breadcrumbs" data-v-5ce2392f><div data-v-48fb2d7a data-v-5ce2392f><div class="container" data-v-48fb2d7a><div class="crumbs" data-v-48fb2d7a><a href="/" class="crumbs__item router-link-active" data-v-48fb2d7a>CosmWasm Documentation</a><a href="/architecture/smart-contracts.html" aria-current="page" class="crumbs__item router-link-exact-active router-link-active" data-v-48fb2d7a>architecture</a><a href="/architecture/smart-contracts.html" aria-current="page" class="crumbs__item router-link-exact-active router-link-active" data-v-48fb2d7a>Comparison with Solidity Contracts</a></div><div class="menu" data-v-48fb2d7a><div class="menu__item" style="visibility:visible;" data-v-48fb2d7a><svg width="100%" height="100%" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="menu__item__icon menu__item__icon__active__false" data-v-48fb2d7a><path fill-rule="evenodd" clip-rule="evenodd" d="M0.25 2C0.25 1.58579 0.585786 1.25 1 1.25H6C6.41421 1.25 6.75 1.58579 6.75 2C6.75 2.41421 6.41421 2.75 6 2.75H1C0.585786 2.75 0.25 2.41421 0.25 2ZM17.53 22.7803L16.9997 22.25L17.53 22.7803L17.5301 22.7802L17.5305 22.7798L17.5322 22.7781L17.5388 22.7715L17.5647 22.7456L17.6647 22.6456L18.0367 22.2737L19.2978 21.0126L22.53 17.7803C22.8229 17.4874 22.8229 17.0126 22.53 16.7197C22.2371 16.4268 21.7622 16.4268 21.4693 16.7197L18.2371 19.9519L17.7497 20.4393V8.5C17.7497 6.34186 17.0721 4.51182 15.7802 3.21983C14.4882 1.92783 12.6581 1.25031 10.5 1.25031C10.0858 1.25031 9.75 1.5861 9.75 2.00031C9.75 2.41453 10.0858 2.75031 10.5 2.75031C12.3419 2.75031 13.7617 3.32264 14.7195 4.28049C15.6773 5.23834 16.2497 6.65814 16.2497 8.5L16.2497 20.4393L12.53 16.7197C12.2371 16.4268 11.7622 16.4268 11.4693 16.7197C11.1764 17.0126 11.1764 17.4874 11.4693 17.7803L16.4693 22.7803L16.9997 23.3107L17.53 22.7803ZM1 6.25C0.585786 6.25 0.25 6.58579 0.25 7C0.25 7.41421 0.585786 7.75 1 7.75H10C10.4142 7.75 10.75 7.41421 10.75 7C10.75 6.58579 10.4142 6.25 10 6.25H1ZM0.25 12C0.25 11.5858 0.585786 11.25 1 11.25H12C12.4142 11.25 12.75 11.5858 12.75 12C12.75 12.4142 12.4142 12.75 12 12.75H1C0.585786 12.75 0.25 12.4142 0.25 12ZM1 16.25C0.585786 16.25 0.25 16.5858 0.25 17C0.25 17.4142 0.585786 17.75 1 17.75H8C8.41421 17.75 8.75 17.4142 8.75 17C8.75 16.5858 8.41421 16.25 8 16.25H1Z" data-v-48fb2d7a></path></svg><!----></div></div></div></div></div><div class="layout__main__content__body__wrapper" data-v-5ce2392f><div style="width:100%;" data-v-7a350818 data-v-5ce2392f><div class="search__container" data-v-7a350818><div class="search" data-v-7a350818><div class="search__icon" data-v-7a350818><svg width="100%" height="100%" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-7a350818><path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 2.75C6.66751 2.75 2.75 6.66751 2.75 11.5C2.75 16.3325 6.66751 20.25 11.5 20.25C13.6462 20.25 15.612 19.4773 17.1342 18.1949L22.6697 23.7303C22.9626 24.0232 23.4374 24.0232 23.7303 23.7303C24.0232 23.4374 24.0232 22.9626 23.7303 22.6697L18.1949 17.1342C19.4773 15.612 20.25 13.6462 20.25 11.5C20.25 6.66751 16.3325 2.75 11.5 2.75ZM16.6923 16.5599C17.9656 15.2535 18.75 13.4684 18.75 11.5C18.75 7.49594 15.5041 4.25 11.5 4.25C7.49594 4.25 4.25 7.49594 4.25 11.5C4.25 15.5041 7.49594 18.75 11.5 18.75C13.4684 18.75 15.2535 17.9656 16.5599 16.6923C16.5789 16.6679 16.5996 16.6444 16.622 16.622C16.6444 16.5996 16.6679 16.5789 16.6923 16.5599Z"></path></svg></div><div class="search__text" data-v-7a350818>Search</div></div></div><div class="container" data-v-7a350818><div class="content__default" data-v-5ce2392f><h2 id="comparison-with-solidity-contracts"><a href="#comparison-with-solidity-contracts" class="header-anchor">#</a> Comparison with Solidity Contracts</h2> <p>First of all, the deploy-execute process consists of 3 steps rather than 2. While Ethereum was built around the concept of many unique contracts, each possibly custom-made for any bilateral agreement, the reality seems to show that writing a bug-free contract is harder than originally thought, and a majority are copies of standard templates like OpenZepellin. With that in mind, and conscious of the overhead of uploading and validating wasm code, we define the following 3 phases of a contract:</p> <ul><li>Upload Code - Upload some optimized wasm code, no state nor contract address (example Standard ERC20 contract)</li> <li>Instantiate Contract - Instantiate a code reference with some initial state, creates new address (example set token name, max issuance, etc for <em>my</em> ERC20 token)</li> <li>Execute Contract - This may support many different calls, but they are all unprivileged usage of a previously instantiated contract, depends on the contract design (example: Send ERC20 token, grant approval to other contract)</li></ul> <p>Just like ethereum, contract instantiation and execution is metered and requires gas. Furthermore, both instantiation and execution allow the signer to send some tokens to the contract along with the message. Two key differences are that sending tokens directly to a contract, eg. via <code>SendMsg</code>, while possible, <em>does not trigger any contract code</em>. This is a clear design decision to reduce possible attack vectors. It doesn't make anything impossible,  but requires all execution of the contract to be <em>explicitly requested</em>.</p> <h2 id="avoiding-reentrancy-attacks"><a href="#avoiding-reentrancy-attacks" class="header-anchor">#</a> Avoiding Reentrancy Attacks</h2> <p>Another big difference is that we avoid all reentrancy attacks by design. This point deserves an article by itself, but in short <a href="https://consensys.github.io/smart-contract-best-practices/known_attacks/" target="_blank" rel="noopener noreferrer">a large class of exploits in Ethereum is based on this trick<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The idea is that in the middle of execution of a function on Contract A, it calls a second contract (explicitly or implicitly via send).  This transfers control to contract B, which can now execute code, and call into Contract A again.  Now there are two copies of Contract A running, and unless you are very, very careful about managing state before executing any remote contract or make very strict gas limits in sub-calls, this can trigger undefined behavior in Contract A, and a clever hacker can reentrancy this as a basis for exploits, such as the DAO hack.</p> <p>Cosmwasm avoids this completely by preventing any contract from calling another one directly. Clearly we want to allow composition, but inline function calls to malicious code creates a security nightmare. The approach taken with CosmWasm is to allow any contract to <em>return</em> a list of messages <em>to be executed in the same transaction</em>. This means that a contract can request a send to happen after it is finished (eg. release escrow), or call into other contract. If the future messages fail, then the entire transaction reverts, including updates to the contract's state. This allows to atomic composition and quite a few security guarantees, with the only real downside that you cannot view the results of executing another contract, rather you can just do &quot;revert on error&quot;.</p> <p>Sometimes we will need information from another contract, and with the 0.8 release, we added synchronous queries to other contracts or underlying Cosmos SDK modules. These Queries only have access to a read-only database snapshot and be unable to modify state or send messages to other modules, thus avoiding any possible reentrancy concerns.</p> <h2 id="resource-limits"><a href="#resource-limits" class="header-anchor">#</a> Resource Limits</h2> <p>Beyond exploits (such as the reentrancy attack), another attack vector for smart contracts is denial of service attacks. A malicious actor could upload a contract that ran an infinite loop to halt the chain or write tons of data to fill up the disk. Web Assembly provides a tight sandbox with no default access to the OS, so we only need to worry about providing tight resource limits for the smart contracts. All developers should be aware of these limits.</p> <p><em>Memory Usage</em> - When instantiating a Wasm VM, it is provided by 32MB of RAM by default. This is to store the byte code as well as all memory used by running the process (stack and heap). This should be plenty large for almost any contract, but maybe some complex zero knowledge circuits would hit limits there. It is also small enough to ensure that contracts have minimal impact of memory usage of the blockchain.</p> <p><em>CPU Usage</em> - The <a href="https://github.com/wasmerio/wasmer" target="_blank" rel="noopener noreferrer">Wasmer Runtime<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that we use, has ability to inject metering logic into the wasm code. It calculates prices for various operations and charges and checks limits before every jump statement (loop, function call, etc), to produce a deterministic gas price regardless of cpu speed, platform, etc. Before executing a contract, a wasm gas limit is set based on remaining Cosmos SDK gas, and gas deducted at the end of the contract (there is a constant multiplier to convert, currently 100 wasm gas to 1 sdk gas). This puts a hard limit on any CPU computations as you must pay for the cycles used.</p> <p><em>Disk Usage</em> - All disk access is via reads and writes on the KVStore. The Cosmos SDK already <a href="https://github.com/cosmos/cosmos-sdk/blob/4ffabb65a5c07dbb7010da397535d10927d298c1/store/types/gas.go#L154-L162" target="_blank" rel="noopener noreferrer">enforces gas payments for KVStore access<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Since all disk access in the contracts is made via callbacks into the SDK, this is charged there. If one were to integrate CosmWasm in another runtime, you would have to make sure to charge for access there as well.</p> <h2 id="lessons-learned-from-ethereum"><a href="#lessons-learned-from-ethereum" class="header-anchor">#</a> Lessons Learned from Ethereum</h2> <p>Ethereum is the grandfather of all blockchain smart contract platforms and has far more usage and real world experience than any other platform. We cannot discount this knowledge, but instead learn from their successes and failures to produce a more robust smart contract platform.</p> <p>They have compiled a list of <a href="https://github.com/sigp/solidity-security-blog" target="_blank" rel="noopener noreferrer">all known ethereum attack vectors<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> along with mitigation strategies. We shall compare Cosmwasm against this list to see how much of this applies here. Many of these attack vectors are closed by design. A number remain and a section is planned on avoiding the remaining such issues.</p> <h3 id="reentrancy"><a href="#reentrancy" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#reentrancy" target="_blank" rel="noopener noreferrer">Reentrancy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>In cosmwasm, we return messages to execute other contracts, in the same atomic operation, but <em>after</em> the contract has finished. This is based on the actor model and avoid the possibility of reentrancy attacks - there is never volatile state when a contract is called.</p> <h3 id="arithmetic-under-overflows"><a href="#arithmetic-under-overflows" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#ouflow" target="_blank" rel="noopener noreferrer">Arithmetic under/overflows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Rust allows you to simply set <code>overflow-checks = true</code> in the <a href="https://doc.rust-lang.org/cargo/reference/manifest.html#the-profile-sections" target="_blank" rel="noopener noreferrer">Cargo manifest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to abort the program if any overflow is detected. No way to opt-out of safe math.</p> <h3 id="unexpected-ether"><a href="#unexpected-ether" class="header-anchor">#</a> ⚠️ <a href="https://github.com/sigp/solidity-security-blog#ether" target="_blank" rel="noopener noreferrer">Unexpected Ether<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><strong>Bad design pattern</strong></p> <p>This involves a contract depending on complete control of it's balance. A design pattern that should be avoided in any contract system. In CosmWasm, contracts are not called when tokens are sent to them, but they can query their current balance when they are called. You can note that the <a href="https://github.com/CosmWasm/cosmwasm-examples/blob/escrow-0.4.0/escrow/src/contract.rs" target="_blank" rel="noopener noreferrer">sample escrow contract<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> doesn't record how much was sent to it during initialization, but rather <a href="https://github.com/CosmWasm/cosmwasm-examples/blob/escrow-0.4.0/escrow/src/contract.rs#L83-L92" target="_blank" rel="noopener noreferrer">releases the current balance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> when a paying out or refunding the amount. This ensures no tokens get stuck.</p> <h3 id="delegate-call"><a href="#delegate-call" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#delegatecall" target="_blank" rel="noopener noreferrer">Delegate Call<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>We don't have such Delegate Call logic in CosmWasm. You can import modules, but they are linked together at compile time, which allows them to be tested as a whole, and no subtle entry points inside of a contract's logic.</p> <h3 id="default-visibilities"><a href="#default-visibilities" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#visibility" target="_blank" rel="noopener noreferrer">Default Visibilities<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Rather than auto-generating entry points for every function/method in your code (and worse yet, assuming public if not specified), the developer must clearly define a list of messages to be handled and dispatch them to the proper functions. It is impossible to accidentally expose a function this way.</p> <h3 id="entropy-illusion"><a href="#entropy-illusion" class="header-anchor">#</a> ⚠️ <a href="https://github.com/sigp/solidity-security-blog#entropy" target="_blank" rel="noopener noreferrer">Entropy Illusion<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><strong>Planned Fix</strong></p> <p>The block hashes (and last digits of timestamps) are even more easily manipulated by block proposers in Tendermint, than with miners in Ethereum. They should definitely not be used for randomness. There is work planned to provide a secure random beacon, and expose this secure source of entropy to smart contracts.</p> <h3 id="external-contract-referencing"><a href="#external-contract-referencing" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#contract-reference" target="_blank" rel="noopener noreferrer">External Contract Referencing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><strong>Planned Mitigation</strong></p> <p>If you call a contract with a given <code>HandleMsg</code>, this just requires the contract has the specified API, but says nothing of the code there. I could upload malicious code with the same API as a desired contract (or a superset of the API), and ask you to call it - either directly or from a contract. This can be used to steal funds, and in fact we <a href="/learn/hijack-escrow/hack-contract.html">demo this in the tutorial</a>.</p> <p>There are two mitigations here. The first is that in CosmWasm, you don't need to call out to solidity libraries at runtime to deal with size limits, but are encouraged to link all the needed code into one wasm blob. This alone removes most usage of the external contract references.</p> <p>The other mitigation is allowing users to quickly find verified rust source behind the wasm contract on the chain. This approach is <a href="https://medium.com/coinmonks/how-to-verify-and-publish-on-etherscan-52cf25312945#bc72" target="_blank" rel="noopener noreferrer">used by etherscan<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, where developers can publish the original source code, and it will compile the code. If the same bytecode is on chain, we know can prove it came from this rust source. We have built the deterministic build system for rust wasm, and
have <a href="https://medium.com/confio/dont-trust-cosmwasm-verify-db1caac2d335" target="_blank" rel="noopener noreferrer">simple tooling to validate the original source code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
We also <a href="https://demonet.wasm.glass/codes" target="_blank" rel="noopener noreferrer">released a code explorer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that allows you to browse contracts and locally
verify the source code in one command.</p> <h3 id="short-address-parameter-attack"><a href="#short-address-parameter-attack" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#short-address" target="_blank" rel="noopener noreferrer">Short Address/Parameter Attack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>This is an exploit that takes advantage of the RLP encoding mechanism and fixed 32-byte stack size. It does not apply to our type-checking json parser.</p> <h3 id="unchecked-call-return-values"><a href="#unchecked-call-return-values" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#unchecked-calls" target="_blank" rel="noopener noreferrer">Unchecked CALL Return Values<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>CosmWasm does not allow calling other contracts directly, but rather returning message to later be dispatched by a router. The router will check the result of all messages, and if <strong>any</strong> message in the chain returns an error, the entire transaction is aborted, and state changed rolled back. This allows you to safely focus on the success case when scheduling calls to other contracts, knowing all state will be rolled back if it does not go as planned.</p> <h3 id="race-conditions-front-running"><a href="#race-conditions-front-running" class="header-anchor">#</a> ⚠️ <a href="https://github.com/sigp/solidity-security-blog#race-conditions" target="_blank" rel="noopener noreferrer">Race Conditions/Front Running<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>This is a general problem with all blockchains. The signed message is gossiped among all nodes before a block is formed. A key miner/validator could create another transaction and insert it before yours (maybe delaying yours). This is often not an issue, but shows up quite a bit in distributed exchanges. If there is a standing sell order at 90 and I place a buy order at 100, it would normally just match at 90. However, a miner could insert two transactions between, one to buy at 90, then other to sell at 100, then delay your transaction to the end. You would end up accepting their offer at 100 and they would make a profit of 10 tokens just for doing arbitrage.</p> <p>This is also an issue in high-frequency trading and any system that relies on ordering between clients to determine the outcome, just more pronounced in blockchain as the delays are on the order of seconds, not microseconds. For most applications this is not an issue, and for decentralized exchanges, there are designs with eg. batch auctions that eliminate the potential of front running.</p> <h3 id="denial-of-service"><a href="#denial-of-service" class="header-anchor">#</a> ⚠️ <a href="https://github.com/sigp/solidity-security-blog#dos" target="_blank" rel="noopener noreferrer">Denial of Service<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p><strong>limited circumstances</strong></p> <p>The idea is that if the contract relies on some external user-defined input, it could be set up in a way that it would run out of gas processing it. Many of the cases there should not effect CosmWasm, especially as wasm runs much faster and cpu gas limits allow huge amounts of processing in one transaction (including ed25519 signature verification in wasm without a precompile). However, looping over an user-controlled number of keys in the storage will run out of gas quickly.</p> <h3 id="block-timestamp-manipulation"><a href="#block-timestamp-manipulation" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#block-timestamp" target="_blank" rel="noopener noreferrer">Block Timestamp Manipulation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Tendermint provides <a href="https://github.com/tendermint/tendermint/blob/master/docs/spec/blockchain/blockchain.md#time-1" target="_blank" rel="noopener noreferrer">BFT Timestamps<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in all the blockchain headers. This means that you need a majority of the validators to collude to manipulate the timestamp, and it can be as trusted as the blockchain itself. (That same majority could halt the chain or work on a fork)</p> <h3 id="constructors-with-care"><a href="#constructors-with-care" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#constructors" target="_blank" rel="noopener noreferrer">Constructors with Care<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>This is an idiosyncrasy of the solidity language with constructor naming. It is highly unlikely you would ever rename <code>init</code> in cosmwasm, and if you did, it would fail to compile rather than producing a backdoor.</p> <h3 id="uninitialised-storage-pointers"><a href="#uninitialised-storage-pointers" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#storage" target="_blank" rel="noopener noreferrer">Uninitialised Storage Pointers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>CosmWasm doesn't automatically fill in variables, you must explicitly load them from storage. And rust does not allow uninitialized variables anywhere (unless you start writing <code>unsafe</code> blocks, and make a special call to access uninitialized memory... but then you are asking for trouble). Making storage explicit rather than implicit removes this class of failures.</p> <h3 id="floating-points-and-precision"><a href="#floating-points-and-precision" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#precision" target="_blank" rel="noopener noreferrer">Floating Points and Precision<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>Both Solidity and CosmWasm have no support for floating point operations, due to possible non-determinism in rounding (which is CPU dependent). Solidity has no alternative to do integer math and many devs hand-roll integer approximations to decimal numbers, which may introduce rounding errors.</p> <p>In CosmWasm, You can import any rust package, and simply pick an appropriate package and use it internally. Like <a href="https://docs.rs/rust_decimal/1.0.3/rust_decimal/" target="_blank" rel="noopener noreferrer">rust_decimal<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, &quot;a Decimal implementation written in pure Rust suitable for financial calculations that require significant integral and fractional digits with no round-off errors.&quot;. Or <a href="https://docs.rs/fixed/0.5.0/fixed/" target="_blank" rel="noopener noreferrer">fixed<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to provide fixed-point decimal math. It supports up to 128-bit numbers, which is enough for 18 digits before the decimal and 18 afterwards, which should be enough for any use case.</p> <h3 id="tx-origin-authentication"><a href="#tx-origin-authentication" class="header-anchor">#</a> ✔️ <a href="https://github.com/sigp/solidity-security-blog#tx-origin" target="_blank" rel="noopener noreferrer">Tx.Origin Authentication<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h3> <p>CosmWasm doesn't expose <code>tx.origin</code>, but only the contract or user directly calling the contract as <code>params.message.signer</code>. This means it is impossible to rely on the wrong authentication, as there is only one value to compare.</p></div><!----></div></div></div></div><div class="layout__main__content__aside__container" style="--height-banners:nullpx;" data-v-5ce2392f><div class="layout__main__content__aside aside__bottom__false" data-v-5ce2392f><!----></div><div class="layout__main__content__aside__banners" data-v-5ce2392f><a href="https://github.com/CosmWasm/docs/edit/master//architecture/smart-contracts.md" target="_blank" data-v-5ce2392f><div data-v-31935645 data-v-5ce2392f><div class="container" data-v-31935645><svg width="100%" height="100%" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="icon" data-v-31935645><path d="M0.836491 13.7697C0.543598 14.0626 0.543598 14.5374 0.836492 14.8303C1.12939 15.1232 1.60426 15.1232 1.89715 14.8303L0.836491 13.7697ZM14.7729 1.95457C15.0658 1.66168 15.0658 1.1868 14.7729 0.893912C14.48 0.601019 14.0051 0.601019 13.7122 0.893913L14.7729 1.95457ZM14.6668 1H15.4168V0.25H14.6668V1ZM4.48498 0.25C4.07077 0.25 3.73498 0.585786 3.73498 1C3.73498 1.41421 4.07077 1.75 4.48498 1.75V0.25ZM13.9168 11.1818C13.9168 11.596 14.2526 11.9318 14.6668 11.9318C15.081 11.9318 15.4168 11.596 15.4168 11.1818H13.9168ZM1.89715 14.8303L14.7729 1.95457L13.7122 0.893913L0.836491 13.7697L1.89715 14.8303ZM14.6668 0.25H4.48498V1.75H14.6668V0.25ZM15.4168 11.1818V1H13.9168V11.1818H15.4168Z"></path></svg><div class="image" data-v-31935645><svg width="41" height="44" viewBox="0 0 41 44" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-31935645><path fill-rule="evenodd" clip-rule="evenodd" d="M4 1.8999H32C33.3807 1.8999 34.5 3.01919 34.5 4.3999V10.997L36 9.497V4.3999C36 2.19076 34.2091 0.399902 32 0.399902H4C1.79086 0.399902 0 2.19077 0 4.39991V39.5999C0 41.809 1.79086 43.5999 4 43.5999H32C34.2091 43.5999 36 41.809 36 39.5999V20.2096L34.5 21.7096V39.5999C34.5 40.9806 33.3807 42.0999 32 42.0999H4C2.61929 42.0999 1.5 40.9806 1.5 39.5999V4.39991C1.5 3.01919 2.61929 1.8999 4 1.8999ZM7.2 19.1999H26.2971L24.2971 21.1999H7.2V19.1999ZM7.2 15.7999H28.8V13.7999H7.2V15.7999ZM7.2 26.5999H16.2V24.5999H7.2V26.5999ZM20.8638 25.7372L20.7386 25.8624L20.6826 26.0303L18.9855 31.1215L18.4792 32.6406L19.9704 32.0571L24.8494 30.1479L24.9955 30.0908L25.1064 29.9798L37.9799 17.1063L39.7831 15.3032C40.9546 14.1316 40.9546 12.2321 39.7831 11.0606C38.6115 9.88898 36.712 9.88898 35.5404 11.0606L20.8638 25.7372ZM20.9149 30.0767L22.0496 26.6726L36.6011 12.1212C37.1869 11.5354 38.1366 11.5354 38.7224 12.1212C39.3082 12.707 39.3082 13.6567 38.7224 14.2425L37.4496 15.5153L36.2465 14.3122C35.9536 14.0193 35.4787 14.0193 35.1858 14.3122C34.8929 14.6051 34.8929 15.08 35.1858 15.3729L36.3889 16.576L24.5761 28.3888L23.6215 27.4342C23.3286 27.1413 22.8537 27.1413 22.5608 27.4342C22.2679 27.7271 22.2679 28.202 22.5608 28.4949L23.2349 29.1689L20.9149 30.0767Z" fill="var(--color-primary, blue)" data-v-31935645></path></svg></div><div class="h1" data-v-31935645>Found an Issue?</div><div class="h2" data-v-31935645>Help us improve this page by suggesting edits on GitHub.</div></div></div></a></div></div></div><div class="layout__main__gutter" data-v-5ce2392f><div data-v-15325c0d data-v-5ce2392f><div class="links" data-v-15325c0d><div class="links__wrapper" data-v-15325c0d><div class="links__container" data-v-15325c0d><a href="/architecture/composition.html" class="links__item links__item__left" data-v-15325c0d><div class="links__item__icon" data-v-15325c0d><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 64 64" data-v-15325c0d><title data-v-15325c0d>arrow-right</title><g stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" data-v-15325c0d><line fill="none" stroke-miterlimit="10" x1="61" y1="32" x2="3" y2="32" stroke-linecap="butt" data-v-15325c0d></line><polyline fill="none" stroke-miterlimit="10" points="21,14 3,32 21,50 " data-v-15325c0d></polyline></g></svg></div><div data-v-15325c0d><div class="links__label" data-v-15325c0d>Previous</div><div class="links__item__title" data-v-15325c0d>Contract Composition</div><!----></div></a></div></div><div class="links__wrapper" data-v-15325c0d><!----></div></div></div></div><div class="layout__main__footer" data-v-5ce2392f><div data-v-732a47ec data-v-5ce2392f><div class="wrapper" data-v-732a47ec><div class="container" data-v-732a47ec><div class="footer__wrapper" data-v-732a47ec><!----><!----><div class="logo" data-v-732a47ec><div class="logo__item" data-v-732a47ec><a href="https://www.cosmwasm.com" target="_blank" rel="noreferrer noopener" tag="div" class="logo__image" data-v-732a47ec><img src="/logo/SVG/CosmWasm_Logo_Clear_Black.svg" data-v-732a47ec></a></div><div class="logo__item logo__link" data-v-732a47ec><a href="https://medium.com/confio" target="_blank" title="medium" rel="noreferrer noopener" class="smallprint__item__links__item" data-v-732a47ec><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#aaa" data-v-732a47ec><path d="M24 24h-24v-24h24v24zm-4.03-5.649v-.269l-1.247-1.224c-.11-.084-.165-.222-.142-.359v-8.998c-.023-.137.032-.275.142-.359l1.277-1.224v-.269h-4.422l-3.152 7.863-3.586-7.863h-4.638v.269l1.494 1.799c.146.133.221.327.201.523v7.072c.044.255-.037.516-.216.702l-1.681 2.038v.269h4.766v-.269l-1.681-2.038c-.181-.186-.266-.445-.232-.702v-6.116l4.183 9.125h.486l3.593-9.125v7.273c0 .194 0 .232-.127.359l-1.292 1.254v.269h6.274z" data-v-732a47ec></path></svg></a><a href="https://twitter.com/CosmWasm" target="_blank" title="twitter" rel="noreferrer noopener" class="smallprint__item__links__item" data-v-732a47ec><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#aaa" data-v-732a47ec><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z" data-v-732a47ec></path></svg></a><a href="https://docs.cosmwasm.com/chat" target="_blank" title="discord" rel="noreferrer noopener" class="smallprint__item__links__item" data-v-732a47ec><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#aaa" data-v-732a47ec><path d="M19.54 0c1.356 0 2.46 1.104 2.46 2.472v21.528l-2.58-2.28-1.452-1.344-1.536-1.428.636 2.22h-13.608c-1.356 0-2.46-1.104-2.46-2.472v-16.224c0-1.368 1.104-2.472 2.46-2.472h16.08zm-4.632 15.672c2.652-.084 3.672-1.824 3.672-1.824 0-3.864-1.728-6.996-1.728-6.996-1.728-1.296-3.372-1.26-3.372-1.26l-.168.192c2.04.624 2.988 1.524 2.988 1.524-1.248-.684-2.472-1.02-3.612-1.152-.864-.096-1.692-.072-2.424.024l-.204.024c-.42.036-1.44.192-2.724.756-.444.204-.708.348-.708.348s.996-.948 3.156-1.572l-.12-.144s-1.644-.036-3.372 1.26c0 0-1.728 3.132-1.728 6.996 0 0 1.008 1.74 3.66 1.824 0 0 .444-.54.804-.996-1.524-.456-2.1-1.416-2.1-1.416l.336.204.048.036.047.027.014.006.047.027c.3.168.6.3.876.408.492.192 1.08.384 1.764.516.9.168 1.956.228 3.108.012.564-.096 1.14-.264 1.74-.516.42-.156.888-.384 1.38-.708 0 0-.6.984-2.172 1.428.36.456.792.972.792.972zm-5.58-5.604c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332.012-.732-.54-1.332-1.224-1.332zm4.38 0c-.684 0-1.224.6-1.224 1.332 0 .732.552 1.332 1.224 1.332.684 0 1.224-.6 1.224-1.332 0-.732-.54-1.332-1.224-1.332z" data-v-732a47ec></path></svg></a><a href="https://t.me/joinchat/AkZriEhk9qcRw5A5U2MapA" target="_blank" title="telegram" rel="noreferrer noopener" class="smallprint__item__links__item" data-v-732a47ec><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" fill="#aaa" data-v-732a47ec><path d="M12,0c-6.626,0 -12,5.372 -12,12c0,6.627 5.374,12 12,12c6.627,0 12,-5.373 12,-12c0,-6.628 -5.373,-12 -12,-12Zm3.224,17.871c0.188,0.133 0.43,0.166 0.646,0.085c0.215,-0.082 0.374,-0.267 0.422,-0.491c0.507,-2.382 1.737,-8.412 2.198,-10.578c0.035,-0.164 -0.023,-0.334 -0.151,-0.443c-0.129,-0.109 -0.307,-0.14 -0.465,-0.082c-2.446,0.906 -9.979,3.732 -13.058,4.871c-0.195,0.073 -0.322,0.26 -0.316,0.467c0.007,0.206 0.146,0.385 0.346,0.445c1.381,0.413 3.193,0.988 3.193,0.988c0,0 0.847,2.558 1.288,3.858c0.056,0.164 0.184,0.292 0.352,0.336c0.169,0.044 0.348,-0.002 0.474,-0.121c0.709,-0.669 1.805,-1.704 1.805,-1.704c0,0 2.084,1.527 3.266,2.369Zm-6.423,-5.062l0.98,3.231l0.218,-2.046c0,0 3.783,-3.413 5.941,-5.358c0.063,-0.057 0.071,-0.153 0.019,-0.22c-0.052,-0.067 -0.148,-0.083 -0.219,-0.037c-2.5,1.596 -6.939,4.43 -6.939,4.43Z" data-v-732a47ec></path></svg></a></div></div><div class="smallprint" data-v-732a47ec><div class="smallprint__item smallprint__item__links" data-v-732a47ec><a href="https://www.cosmwasm.com" data-v-732a47ec>cosmwasm.com</a></div><div class="smallprint__item__desc smallprint__item" data-v-732a47ec><div>Copyright © 2020 Confio OÜ</div></div></div></div></div></div></div></div></div></div><div class="sheet__sidebar" data-v-ec82e5e0 data-v-5ce2392f><!----> <!----></div><div class="sheet__sidebar" data-v-ec82e5e0 data-v-5ce2392f><!----> <!----></div><div class="sheet__sidebar sheet__sidebar__toc" data-v-ec82e5e0 data-v-5ce2392f><!----> <!----></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8a6340ad.js" defer></script><script src="/assets/js/23.9b72ba7c.js" defer></script><script src="/assets/js/20.791cc9e9.js" defer></script><script src="/assets/js/24.279da354.js" defer></script><script src="/assets/js/45.2cd0574a.js" defer></script><script src="/assets/js/29.8b812776.js" defer></script><script src="/assets/js/9.1517c868.js" defer></script><script src="/assets/js/6.6d6b1776.js" defer></script><script src="/assets/js/64.bf80057c.js" defer></script><script src="/assets/js/4.42d02817.js" defer></script><script src="/assets/js/27.9c450243.js" defer></script><script src="/assets/js/12.0fca4108.js" defer></script><script src="/assets/js/11.6adb2a6d.js" defer></script><script src="/assets/js/19.e0154ff6.js" defer></script>
  </body>
</html>
