(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{668:function(t,e,o){"use strict";o.r(e);var a=o(0),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"cw20-base-tutorial"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cw20-base-tutorial"}},[t._v("#")]),t._v(" cw20-base Tutorial")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",[t._v("This tutorial does not work with cosmjs 0.23. It will be fixed when 0.24 is out.")])]),t._v(" "),o("p",[t._v("This is a simple tutorial showing you how to use of powerful node REPL to interact with\na CW20 token contract (fungible tokens, like ERC20) on "),o("a",{attrs:{href:"https://github.com/CosmWasm/testnets/tree/master/musselnet",target:"_blank",rel:"noopener noreferrer"}},[t._v("musselnet"),o("OutboundLink")],1),t._v(".")]),t._v(" "),o("p",[t._v("I will walk you through uploading contract code and creating a concrete instance (the same "),o("code",[t._v("cw20-base")]),t._v("\nwasm code can be reused to create dozens of token contracts with different symbols and distributions).\nThen I will show you how to easily interact with this contract. As JSON manipulation and local variables\nare not so much fun in BASH, we use the "),o("a",{attrs:{href:"https://github.com/CosmWasm/cosmjs/tree/master/packages/cli",target:"_blank",rel:"noopener noreferrer"}},[o("code",[t._v("@cosmjs/cli")]),o("OutboundLink")],1),t._v("\ntool instead of the "),o("code",[t._v("wasmd")]),t._v(" CLI tool.")]),t._v(" "),o("p",[t._v("But, before we get into the fun part of playing with the smart contracts, I want to make sure\nyou know how to use your tools and not loose your private keys.")]),t._v(" "),o("p",[t._v("You must have Node 10+ installed locally to run it. It has been tested on Ubuntu, and may not\nwork properly on Windows (we assume a HOME environmental variable). PRs welcome.")]),t._v(" "),o("h2",{attrs:{id:"connecting-to-the-chain"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#connecting-to-the-chain"}},[t._v("#")]),t._v(" Connecting to the chain")]),t._v(" "),o("p",[t._v("The first step before doing anything is ensuring we can create an account and connect to the chain.\nYou will always use the following command to start up the "),o("code",[t._v("@cosmjs/cli")]),t._v(" with some cw20-specific helpers preloaded\n(in addition to all the general helpers it has).")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"shell",base64:"bnB4IEBjb3NtanMvY2xpQF4wLjIzIC0taW5pdCBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vQ29zbVdhc20vY29zbXdhc20tcGx1cy9tYXN0ZXIvY29udHJhY3RzL2N3MjAtYmFzZS9oZWxwZXJzLnRzCg=="}}),t._v(" "),o("p",[t._v("Once this downloads the source and starts up, you should see a bunch of yellow text (explaining what code is preloaded),\nfollowed by a familiar node prompt: "),o("code",[t._v(">>")]),t._v(". Please note this is a super-charged REPL, it allows the use of "),o("code",[t._v("await")]),t._v("\nto easily work with "),o("code",[t._v("Promises")]),t._v(", and also does type-checks before executing code. You don't need to define types,\nbut if you type "),o("code",[t._v("client.getCodez()")]),t._v(", you will get the helpful message:\n"),o("code",[t._v("Property 'getCodez' does not exist on type 'SigningCosmWasmClient'. Did you mean 'getCodes'?")]),t._v(",\nmuch better than the typical "),o("code",[t._v("TypeError: client.getCodez is not a function")]),t._v("\nor worse "),o("code",[t._v("cannot call undefined")]),t._v(".")]),t._v(" "),o("p",[t._v("Without further ado, let's get to use it, and please do read the error messages:")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"Y29uc3QgY2xpZW50ID0gYXdhaXQgdXNlT3B0aW9ucyhoYWNrYXRvbU9wdGlvbnMpLnNldHVwKFlPVVJfUEFTU1dPUkRfSEVSRSk7CmNsaWVudC5nZXRBY2NvdW50KCk7Cg=="}}),t._v(" "),o("p",[t._v("This will take a few seconds as we hit the faucet the first time to ensure you have\nsome tokens in your account to pay fees. When it returns, you should see something like this:")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"eyBhZGRyZXNzOiAnY29zbW9zMTZobjdxMHloZnJtMjh0YTl6bGs3ZnU0NmE5OHdzczMzeHdmeHlzJywKICBiYWxhbmNlOiBbIHsgZGVub206ICd1Y29zbScsIGFtb3VudDogJzEwMDAwMDAnIH0gXSwKICBwdWJrZXk6IHVuZGVmaW5lZCwKICBhY2NvdW50TnVtYmVyOiAzMSwKICBzZXF1ZW5jZTogMCB9Cg=="}}),t._v(" "),o("h2",{attrs:{id:"reloading-your-wallet"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#reloading-your-wallet"}},[t._v("#")]),t._v(" Reloading your Wallet")]),t._v(" "),o("p",[t._v("You can keep typing in the shell, or close it and run some sections later.\nAlways start off with:")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"Y29uc3QgY2xpZW50ID0gYXdhaXQgdXNlT3B0aW9ucyhoYWNrYXRvbU9wdGlvbnMpLnNldHVwKFlPVVJfUEFTU1dPUkRfSEVSRSk7Cg=="}}),t._v(" "),o("p",[t._v("to set up your client. "),o("code",[t._v("useOptions")]),t._v(" takes the musselnet configuration from everything from\nURLs to tokens to bech32prefix. When you call "),o("code",[t._v("setup")]),t._v(" with a password, it checks for\n"),o("code",[t._v("~/.helder.key")]),t._v(" and creates a new key if it is not there, otherwise it loads the key from the file.\nYour private key (actually mnemonic) is stored encrypted, and you need the same password to use it again.\nTry "),o("code",[t._v("cat ~/.helder.key")]),t._v(" to prove to yourself that it is indeed encrypted, or try reloading with a different\npassword.")]),t._v(" "),o("p",[t._v("If you want the mnemonic, you can recover it at anytime, as long as you still have the file and the password.\nYou could use this later to recover, or use the same mnemonic to import the key into the "),o("code",[t._v("helder")]),t._v(" cli tool.")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"dXNlT3B0aW9ucyhoYWNrYXRvbU9wdGlvbnMpLnJlY292ZXJNbmVtb25pYyhZT1VSX1BBU1NXT1JEX0hFUkUpCg=="}}),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",[t._v("This command saves the key to "),o("code",[t._v("~/.helder.key")]),t._v(" encrypted. If you forget the password, either delete it or pass a\n"),o("code",[t._v("filename")]),t._v(" along with a password to create a new key.")])]),t._v(" "),o("p",[t._v("Also, try this with a invalid password and see how it fails.")]),t._v(" "),o("p",[t._v("Now that you feel a bit more secure about your keys (and ability to load them later), let's get into working with\nsome contracts.")]),t._v(" "),o("h2",{attrs:{id:"sending-cw20-tokens"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#sending-cw20-tokens"}},[t._v("#")]),t._v(" Sending CW20 Tokens")]),t._v(" "),o("p",[t._v("Now that you have set up your client, let's get going and try out the\n"),o("a",{attrs:{href:"https://github.com/CosmWasm/cosmwasm-plus/tree/master/contracts/cw20-base",target:"_blank",rel:"noopener noreferrer"}},[o("code",[t._v("cw20-base")]),o("OutboundLink")],1),t._v("\ntoken contract, which implements the\n"),o("a",{attrs:{href:"https://github.com/CosmWasm/cosmwasm-plus/blob/master/packages/cw20/README.md",target:"_blank",rel:"noopener noreferrer"}},[o("code",[t._v("cw20")]),t._v(" spec"),o("OutboundLink")],1),t._v(".")]),t._v(" "),o("p",[t._v("We will show how to upload the compiled wasm code, instantiate your own contract (possibly\nreusing code), and then mint and transfer tokens on that contract.")]),t._v(" "),o("h2",{attrs:{id:"upload-and-instantiate-a-contract"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#upload-and-instantiate-a-contract"}},[t._v("#")]),t._v(" Upload and Instantiate a Contract")]),t._v(" "),o("p",[t._v("I will walk you though how to set up an example CW20 contract on Heldernet.")]),t._v(" "),o("h3",{attrs:{id:"example-star"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#example-star"}},[t._v("#")]),t._v(" Example: STAR")]),t._v(" "),o("p",[t._v('The first contract I uploaded was STAR tokens, or "Golden Stars" to be distribute to the\n'),o("a",{attrs:{href:"https://bigdipper.musselnet.cosmwasm.com/validators",target:"_blank",rel:"noopener noreferrer"}},[t._v("first 3 validators"),o("OutboundLink")],1),t._v(" on the network.")]),t._v(" "),o("p",[t._v("Please do not copy this verbatum, but look to see how such a contract is setup and deployed the first time.")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"Y29uc3QgY2xpZW50ID0gYXdhaXQgdXNlT3B0aW9ucyhoYWNrYXRvbU9wdGlvbnMpLnNldHVwKFlPVVJfUEFTU1dPUkRfSEVSRSk7Cgpjb25zdCBjdzIwID0gQ1cyMChjbGllbnQpOwpjb25zdCBjb2RlSWQgPSBhd2FpdCBjdzIwLnVwbG9hZCgpOwpjb25zb2xlLmxvZyhgQ29kZUlkOiAke2NvZGVJZH1gKTsKLy8gb3V0cHV0OiA0MjkKCi8vIGVuYWJsZSBSRVBMIGVkaXRvciBtb2RlIHRvIGVkaXQgbXVsdGlsaW5lIGNvZGUgdGhlbiBleGVjdXRlCi5lZGl0b3IKY29uc3QgaW5pdE1zZyA9IHsKICBuYW1lOiAmcXVvdDtHb2xkZW4gU3RhcnMmcXVvdDssCiAgc3ltYm9sOiAmcXVvdDtTVEFSJnF1b3Q7LAogIGRlY2ltYWxzOiAyLAogIC8vIGxpc3Qgb2YgYWxsIHZhbGlkYXRvciBzZWxmLWRlbGVnYXRlIGFkZHJlc3NlcyAtIDEwMCBTVEFScyBlYWNoIQogIGluaXRpYWxfYmFsYW5jZXM6IFsKICAgIHsgYWRkcmVzczogJnF1b3Q7Y29zbW9zMWV6MDNtZTd1bGprN3FlcnN3ZHA5MzV2bGFhNGRsdTQ4bXlzM21xJnF1b3Q7LCBhbW91bnQ6ICZxdW90OzEwMDAwJnF1b3Q7fSwKICAgIHsgYWRkcmVzczogJnF1b3Q7Y29zbW9zMXR4N2dhMGxzbnVtZDVoZnNoMnB5MDQwNHN6dG5zaHdxYXFqd3k4JnF1b3Q7LCBhbW91bnQ6ICZxdW90OzEwMDAwJnF1b3Q7fSwKICAgIHsgYWRkcmVzczogJnF1b3Q7Y29zbW9zMW12anRlenJuOGRwYXRldTA0MzV0cmx3NTA2MnF5NzZnZjczOG4wJnF1b3Q7LCBhbW91bnQ6ICZxdW90OzEwMDAwJnF1b3Q7fSwKICBdLAogIG1pbnQ6IHsKICAgIG1pbnRlcjogY2xpZW50LnNlbmRlckFkZHJlc3MsCiAgfSwKfTsKLy8gZXhpdCBlZGl0b3IgdXNpbmcgYF5EYCBhbmQgZXhlY3V0ZSBlbnRlcmVkIGNvZGUKXkQKCmNvbnN0IGNvbnRyYWN0ID0gYXdhaXQgY3cyMC5pbnN0YW50aWF0ZShjb2RlSWQsIGluaXRNc2csICZxdW90O1NUQVImcXVvdDspOwpjb25zb2xlLmxvZyhgQ29udHJhY3Q6ICR7Y29udHJhY3QuY29udHJhY3RBZGRyZXNzfWApOwovLyBDb250cmFjdDogY29zbW9zMWhqems4d3IyZ3k5ZjN4bnpkcnR2NW05NzM1amN4ZWxqaG0wZjh1Cgpjb25zb2xlLmxvZyhhd2FpdCBjb250cmFjdC5iYWxhbmNlKCZxdW90O2Nvc21vczFlejAzbWU3dWxqazdxZXJzd2RwOTM1dmxhYTRkbHU0OG15czNtcSZxdW90OykpOwovLyAxMDAwMApjb25zb2xlLmxvZyhhd2FpdCBjb250cmFjdC5iYWxhbmNlKCkpOwovLyAwCg=="}}),t._v(" "),o("h3",{attrs:{id:"try-this-at-home-mine"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#try-this-at-home-mine"}},[t._v("#")]),t._v(" Try this at home: MINE")]),t._v(" "),o("p",[t._v("Now that we have that uploaded, we can easily make a second contract. This one, please\ndo run through and customize the field names and token amounts before entering them.")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"Y29uc3QgY2xpZW50ID0gYXdhaXQgdXNlT3B0aW9ucyhoYWNrYXRvbU9wdGlvbnMpLnNldHVwKFlPVVJfUEFTU1dPUkRfSEVSRSk7CmNvbnN0IGFkZHJlc3MgPSBjbGllbnQuc2VuZGVyQWRkcmVzczsKCmNvbnN0IGN3MjAgPSBDVzIwKGNsaWVudCk7CgouZWRpdG9yCmNvbnN0IGluaXRNc2cgPSB7CiAgbmFtZTogJnF1b3Q7TXkgQ29pbiZxdW90OywKICBzeW1ib2w6ICZxdW90O01JTkUmcXVvdDssCiAgZGVjaW1hbHM6IDYsCiAgLy8gbGlzdCBvZiBhbGwgdmFsaWRhdG9yIHNlbGYtZGVsZWdhdGUgYWRkcmVzc2VzIC0gMTAwIFNUQVJzIGVhY2ghCiAgaW5pdGlhbF9iYWxhbmNlczogWwogICAgeyBhZGRyZXNzLCBhbW91bnQ6ICZxdW90OzEyMzQ1Njc4MDAwJnF1b3Q7fSwKICBdLAogIG1pbnQ6IHsKICAgIG1pbnRlcjogYWRkcmVzcywKICAgIGNhcDogJnF1b3Q7OTk5MDAwMDAwMDAmcXVvdDsKICB9LAp9OwpeRAoKY29uc3QgY29kZUlkID0gNDI5Owpjb25zdCBtaW5lID0gYXdhaXQgY3cyMC5pbnN0YW50aWF0ZShjb2RlSWQsIGluaXRNc2csICZxdW90O01JTkUmcXVvdDspOwpjb25zb2xlLmxvZyhgQ29udHJhY3Q6ICR7bWluZS5jb250cmFjdEFkZHJlc3N9YCk7Ci8vIENvbnRyYWN0OiAgY29zbW9zMTBhanVtZTVocGhzOWdjcnBsOW13Mm05NmZ2N3F1MHE3ZXN6bmoyCgovLyBub3csIGNoZWNrIHRoZSBjb25maWd1cmF0aW9uCm1pbmUuYmFsYW5jZSgpOwptaW5lLnRva2VuSW5mbygpCm1pbmUubWludGVyKCkK"}}),t._v(" "),o("p",[t._v("Look, you're rich now! Time to share the wealth.")]),t._v(" "),o("h2",{attrs:{id:"using-a-contract"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#using-a-contract"}},[t._v("#")]),t._v(" Using a contract")]),t._v(" "),o("p",[t._v("In this section, we will show you how to use your newly constructed token.\nYou can keep typing along in the same REPL that you used to create the "),o("code",[t._v("MINE")]),t._v("\ntokens (or whatever better name you invented), but if you closed it down and\ncome back, here's how to re-connect:")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"Y29uc3QgY2xpZW50ID0gYXdhaXQgdXNlT3B0aW9ucyhoYWNrYXRvbU9wdGlvbnMpLnNldHVwKFlPVVJfUEFTU1dPUkRfSEVSRSk7CmNvbnN0IGN3MjAgPSBDVzIwKGNsaWVudCk7CgovLyBpZiB5b3UgZm9yZ290IHlvdXIgYWRkcmVzcywgYnV0IHJlbWVtYmVyIHlvdXIgbGFiZWwsIHlvdSBjYW4gZmluZCBpdCBhZ2Fpbgpjb25zdCBjb250cmFjdHMgPSBhd2FpdCBjbGllbnQuZ2V0Q29udHJhY3RzKDQpCmNvbnRyYWN0cwpjb25zdCBjb250cmFjdEFkZHJlc3MgPSBjb250cmFjdHMuZmlsdGVyKHggPSZndDsgeC5sYWJlbCA9PT0gJ01JTkUnKVswXS5hZGRyZXNzOwoKLy8gb3RoZXJ3aXNlLCB5b3UgY2FuIGp1c3QgY3V0IGFuZCBwYXN0ZSBmcm9tIGJlZm9yZQpjb25zdCBjb250cmFjdEFkZHJlc3MgPSAmcXVvdDtjb3Ntb3MxMGFqdW1lNWhwaHM5Z2NycGw5bXcybTk2ZnY3cXUwcTdlc3puajImcXVvdDsKCi8vIG5vdywgY29ubmVjdCB0byB0aGF0IGNvbnRyYWN0IGFuZCBtYWtlIHN1cmUgaXQgaXMgeW91cnMKY29uc3QgbWluZSA9IGN3MjAudXNlKGNvbnRyYWN0QWRkcmVzcyk7Cm1pbmUudG9rZW5JbmZvKCkKbWluZS5taW50ZXIoKQptaW5lLmJhbGFuY2UoKQo="}}),t._v(" "),o("p",[t._v("Okay, you are connected to your contract. Let's see what cw20 is capable of.\nHere I will show you how you can mint tokens (you did give yourself\nthat special permission on init, right?) and transfer tokens to other\nusers.")]),t._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"js",base64:"Y29uc3Qgc29tZW9uZSA9ICZxdW90O2Nvc21vczEzbnQ5cnhqN3YybHkwOTZobThxc3lmanpnNXByN3ZuNTZwM2NheSZxdW90OzsKY29uc3Qgb3RoZXIgPSAmcXVvdDtjb3Ntb3MxdmUybjlkZDR1eTQ4aHpqZ3g4d2Fta2M3ZHA3c2ZkdjgydTU4NWQmcXVvdDs7CgovLyByaWdodCBub3csIG9ubHkgeW91IGhhdmUgdG9rZW5zCm1pbmUuYmFsYW5jZSgpCm1pbmUuYmFsYW5jZShzb21lb25lKQptaW5lLmJhbGFuY2Uob3RoZXIpCi8vIGFuZCB3YXRjaCB0aGUgdG90YWwKbWluZS50b2tlbkluZm8oKQoKLy8gbGV0J3MgbWludCBzb21lIHRva2VucyBmb3Igc29tZW9uZQptaW5lLm1pbnQoc29tZW9uZSwgJnF1b3Q7OTk5ODg4MDAwJnF1b3Q7KQovLyBCb251cywgdGFrZSB0aGUgdHggaGFzaCBwcmludGVkIG91dCBhbmQgY3V0LXBhc3RlIHRoYXQgaW50byBodHRwczovL2JpZ2RpcHBlci53YXNtbmV0LmNvc213YXNtLmNvbQovLyBlZyAyNkQ1NTE0Q0Y0MzdFRTU4NDc5Mzc2OEI1NkNCNEU2MDVGMUY2RTYxRkMwMTIzMDMwREM2NEUwOEUyRUU5N0ZBCgovLyBTZWUgYmFsYW5jZXMgdXBkYXRlZAptaW5lLmJhbGFuY2Uoc29tZW9uZSkKbWluZS5iYWxhbmNlKCkKLy8gYW5kIHRoZSBzdXBwbHkgZ29lcyB1cAptaW5lLnRva2VuSW5mbygpCgovLyBPa2F5LCBub3cgbGV0J3MgdHJhbnNmZXIgc29tZSB0b2tlbnMuLi4gdGhhdCBpcyB0aGUgbW9yZSBub3JtYWwgb25lLCByaWdodD8KbWluZS50cmFuc2ZlcihvdGhlciwgJnF1b3Q7NDU2NzAwMCZxdW90Oyk7Ci8vIGVnLiA0QTc2RUZGRUIwOUM4MkQwRkVCOTdDM0I1QTlENUJBREI2RTlCRDcxRjRFRjI0OEEzRUY4QjIzMkMyRjcyNjJBCm1pbmUuYmFsYW5jZShvdGhlcikKbWluZS5iYWxhbmNlKCkK"}}),t._v(" "),o("p",[t._v("Great, you are moving stuff around and see it in your queries and in the block explorer.\nTime to act like a pro.")])],1)}),[],!1,null,null,null);e.default=n.exports}}]);